{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/FuzzySearch.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/df-settings-clarity.ts"],"sourcesContent":["import { } from \"../libs/fuzzysort\";\n\ndeclare global {\n\tinterface Application {\n\t\t_recalculateDimensions(): void;\n\t}\n}\n\n(<any>Application.prototype)._recalculateDimensions = function () {\n\tthis.element[0].style.height = '';\n\tthis.setPosition({});\n};\n\nabstract class SettingsProcessor {\n\tstatic readonly DELIM = ' `````` ';\n\tabstract processSettings(html: JQuery<HTMLElement>): void;\n\tabstract injectSearch(html: JQuery<HTMLElement>): JQuery<HTMLInputElement>;\n\tabstract performSearch(pattern: string): void;\n\n\tprotected _updateLabels(text: string, div: JQuery<HTMLElement>, percentage?: number) {\n\t\tconst [label, hint] = text.split(SettingsProcessor.DELIM);\n\t\tif (percentage !== undefined) {\n\t\t\tif (isNaN(percentage)) percentage = 0;\n\t\t\tconst [redPerc, greenPerc] = percentage <= 0.5\n\t\t\t\t? [percentage / 0.5, 1] // <= 0.5, calc green to yellow\n\t\t\t\t: [1, 1 - ((percentage - 0.5) / 0.5)]; // > 0.5, calc yellow to red\n\t\t\tconst red = Math.round(redPerc * 255).toString(16).padStart(2, '0');\n\t\t\tconst green = Math.round(greenPerc * 255).toString(16).padStart(2, '0');\n\t\t\tdiv.css('border-left', `thick solid #${red}${green}00`);\n\t\t\tdiv.css('padding-left', '6px');\n\t\t}\n\t\telse {\n\t\t\tdiv.css('border-left', '');\n\t\t\tdiv.css('padding-left', '');\n\t\t}\n\t\tdiv.find('>label').html(label);\n\t\tif (div[0].classList.contains('submenu'))\n\t\t\tdiv.find('button>label').html(hint);\n\t\telse\n\t\t\tdiv.find('.notes').html(hint);\n\t}\n\tprotected _getOptions(query: string): Fuzzysort.KeysOptions<any> {\n\t\tconst threshold = Math.min(100000, 10000 + (query.length * 10000));\n\t\treturn {\n\t\t\tkeys: ['text'],\n\t\t\tlimit: Infinity,\n\t\t\tthreshold: -threshold,\n\t\t\tallowTypo: false,\n\t\t};\n\t}\n}\n\ninterface DefaultModuleItem { el: JQuery<HTMLElement>, text: string }\nclass DefaultSettingsProcessor extends SettingsProcessor {\n\tprivate _settings: DefaultModuleItem[] = [];\n\tprivate _getMenuData(div: JQuery<HTMLElement>): DefaultModuleItem {\n\t\treturn {\n\t\t\tel: div,\n\t\t\ttext: $(div).find('>label').text()\n\t\t\t\t+ SettingsProcessor.DELIM + $(div).find('button').find('label').text()\n\t\t\t\t+ SettingsProcessor.DELIM + $(div).find('.notes').text(),\n\t\t};\n\t}\n\tprivate _getRegularData(div: JQuery<HTMLElement>): DefaultModuleItem {\n\t\treturn {\n\t\t\tel: div,\n\t\t\ttext: $(div).find('>label').text() + SettingsProcessor.DELIM + $(div).find('.notes').text(),\n\t\t};\n\t}\n\tprocessSettings(html: JQuery<HTMLElement>) {\n\t\tconst children = html.find('.categories > .scrollable').children();\n\t\tchildren.each((_, section: HTMLElement) => {\n\t\t\t$(section).children().each((_, element: HTMLElement) => {\n\t\t\t\tif (element instanceof HTMLHeadingElement) return;\n\t\t\t\telse {\n\t\t\t\t\tif (element.classList.contains('submenu'))\n\t\t\t\t\t\tthis._settings.push(this._getMenuData($(element)));\n\t\t\t\t\telse\n\t\t\t\t\t\tthis._settings.push(this._getRegularData($(element)));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tinjectSearch(html: JQuery<HTMLElement>): JQuery<HTMLInputElement> {\n\t\treturn html.find<HTMLInputElement>('input[name=\"filter\"]');\n\t}\n\tperformSearch(pattern: string) {\n\t\tif (pattern.length < 2) {\n\t\t\tfor (const item of this._settings) {\n\t\t\t\titem.el.show();\n\t\t\t\tthis._updateLabels(item.text, item.el);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst results = fuzzysort.go(pattern, this._settings, this._getOptions(pattern));\n\t\tfor (let c = 0; c < this._settings.length; c++) {\n\t\t\tconst resultIdx = results.findIndex(x => x.obj === this._settings[c]);\n\t\t\tlet text: string;\n\t\t\tlet percentage: number = undefined;\n\t\t\tif (resultIdx >= 0) {\n\t\t\t\tthis._settings[c].el.show();\n\t\t\t\ttext = fuzzysort.highlight(results[resultIdx][0]);\n\t\t\t\tpercentage = resultIdx / (results.length - 1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._settings[c].el.hide();\n\t\t\t\ttext = this._settings[c].text;\n\t\t\t}\n\t\t\tthis._updateLabels(text, this._settings[c].el, percentage);\n\t\t}\n\t}\n}\n\nexport default class FuzzySearch {\n\tprivate static _settingsProcessor: SettingsProcessor = null;\n\tstatic init() {\n\t\tHooks.on('renderSettingsConfig', (_settingsConfig: SettingsConfig, html: JQuery<HTMLElement>, _data: any) => {\n\t\t\t// Process entire settings list\n\t\t\tthis._settingsProcessor = new DefaultSettingsProcessor();\n\t\t\tthis._settingsProcessor.processSettings(html);\n\t\t\t// Add the search box to the view\n\t\t\tconst searchField = this._settingsProcessor.injectSearch(html);\n\t\t\t// Activate listeners\n\t\t\tsearchField.on('input', function () {\n\t\t\t\tFuzzySearch._settingsProcessor.performSearch(<string>$(this).val());\n\t\t\t});\n\t\t\t_settingsConfig._recalculateDimensions();\n\t\t});\n\t}\n}\n// add weights to the strings. Names have higher priority than Hints","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { UserData } from '@league-of-foundry-developers/foundry-vtt-types/src/foundry/common/data/data.mjs';\nimport FuzzySearch from \"./FuzzySearch\";\nimport { } from '../../common/Settings';\n\nexport { };\n\nclass DFSettingsClarity {\n\tstatic types = [\"client\", \"world\"];\n\n\tstatic patchGameSettings() {\n\t\tlibWrapper.register('df-settings-clarity', 'ClientSettings.prototype.register', DFSettingsClarity.settingsRegister, 'WRAPPER');\n\t\tfor (const pair of game.settings.settings) {\n\t\t\tpair[1].name = DFSettingsClarity.formatName(pair[1].name ?? '', pair[1]);\n\t\t}\n\t}\n\n\tstatic patchGameSettingsMenus() {\n\t\tlibWrapper.register('df-settings-clarity', 'ClientSettings.prototype.registerMenu', DFSettingsClarity.settingsRegisterMenu, 'WRAPPER');\n\t\tfor (const pair of game.settings.menus) {\n\t\t\tpair[1].name = DFSettingsClarity.formatName(pair[1].name ?? '', pair[1]);\n\t\t}\n\t}\n\n\tstatic formatName(name: string, data: ClientSettings.PartialSettingConfig<any> | ClientSettings.PartialSettingSubmenuConfig): string {\n\t\tif (name.startsWith('👤') || name.startsWith('🌎'))\n\t\t\treturn name;\n\t\tlet scope;\n\t\tif ((data as ClientSettings.PartialSettingConfig<any>).scope)\n\t\t\tscope = DFSettingsClarity.types.includes((data as ClientSettings.PartialSettingConfig<any>).scope)\n\t\t\t\t? (data as ClientSettings.PartialSettingConfig<any>).scope\n\t\t\t\t: \"client\";\n\t\telse if ((data as ClientSettings.PartialSettingSubmenuConfig).restricted)\n\t\t\tscope = (data as ClientSettings.PartialSettingSubmenuConfig) ? 'world' : 'client';\n\t\telse {\n\t\t\tconsole.warn('Unknown restriction/scope on registered setting for ' + name + '\". Defaulting to \"client\"');\n\t\t\tscope = 'client';\n\t\t}\n\t\tif (scope === 'client') return !name ? '👤' : '👤 ' + game.i18n.localize(name);\n\t\telse if (scope === 'world') return !name ? '🌎' : '🌎 ' + game.i18n.localize(name);\n\t\treturn name;\n\t}\n\n\tstatic settingsRegister(this: ClientSettings, wrapper: AnyFunction, module: string, key: string, data: ClientSettings.PartialSettingConfig<any>) {\n\t\tdata.name = DFSettingsClarity.formatName(data.name ?? '', data);\n\t\twrapper(module, key, data);\n\t}\n\n\tstatic settingsRegisterMenu(this: ClientSettings, wrapper: AnyFunction, module: string, key: string, data: ClientSettings.PartialSettingSubmenuConfig) {\n\t\tdata.name = DFSettingsClarity.formatName(data.name ?? '', data);\n\t\twrapper(module, key, data);\n\t}\n\n\tstatic showWorldHover(event: JQuery.MouseMoveEvent) {\n\t\tif (event.clientX > $(event.target).offset().left + 30) DFSettingsClarity.hideHover();\n\t\telse DFSettingsClarity.showHover($(event.target), 'world');\n\t}\n\tstatic showClientHover(event: JQuery.MouseMoveEvent) {\n\t\tif (event.clientX > $(event.target).offset().left + 30) DFSettingsClarity.hideHover();\n\t\telse DFSettingsClarity.showHover($(event.target), 'client');\n\t}\n\tstatic hover = $(`<div class=\"df-settings-clarity-tooltip\" style=\"visibility:hidden\"><span class=\"msg\"></span><img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMzAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMCAwLjVhMTEuNDA4IDExLjQwOCAyNC4wNTcgMCAxIDcuNjUxNCAzLjQxNThsMTEuODQ5IDExLjA4NC0xMS44NDkgMTEuMDg0YTExLjQwOCAxMS40MDggMTU1Ljk0IDAgMS03LjY1MTQgMy40MTU4IiBmaWxsPSIjMDAwMDAwQmYiIHN0cm9rZT0iI2Y2MCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==\"></div>`);\n\tstatic showHover(element: JQuery<HTMLElement>, scope: string) {\n\t\tconst hover = DFSettingsClarity.hover;\n\t\tif (hover.parent().length != 0) return;\n\t\thover.find('span.msg').text(game.i18n.localize('DF_SETTINGS_CLARITY.Scope_' + scope));\n\t\t$(document.body).append(hover);\n\t\tconst css = {\n\t\t\tposition: 'absolute',\n\t\t\tleft: `${element.offset().left - hover.outerWidth()}px`,\n\t\t\ttop: `${element.offset().top - 15}px`\n\t\t};\n\t\thover.css(css);\n\t}\n\tstatic hideHover() {\n\t\tif (DFSettingsClarity.hover.parent().length == 0) return;\n\t\tDFSettingsClarity.hover.remove();\n\t}\n}\n\nHooks.once('init', function () {\n\tFuzzySearch.init();\n});\n\nHooks.once('setup', function () {\n\tconst user = game.data.users.find(x => x._id === game.userId) as any as UserData;\n\tconst perms: { [key: string]: number[] } = game.settings.get('core', 'permissions');\n\tif (!!user && perms['SETTINGS_MODIFY'].includes(user.role)) {\n\t\tDFSettingsClarity.patchGameSettings();\n\t\tDFSettingsClarity.patchGameSettingsMenus();\n\t}\n\t$(document.body).append(DFSettingsClarity.hover);\n});\nHooks.once('ready', function () {\n\tif (!game.modules.get('lib-wrapper')?.active) {\n\t\tconsole.error('Missing libWrapper module dependency');\n\t\tif (game.user.isGM)\n\t\t\tui.notifications.error(game.i18n.localize('DF_SETTINGS_CLARITY.errorLibWrapperMissing'));\n\t\treturn;\n\t}\n\tDFSettingsClarity.hover.remove();\n\tDFSettingsClarity.hover.attr(\"style\", \"\");\n});\n\nHooks.on('renderSettingsConfig', function (_app: any, html: JQuery<HTMLElement>, _data: any) {\n\tconst world = html.find(\"label:contains('🌎')\");\n\tworld.on('mousemove', DFSettingsClarity.showWorldHover);\n\tworld.on('mouseleave', DFSettingsClarity.hideHover);\n\tconst client = html.find(\"label:contains('👤')\");\n\tclient.on('mousemove', DFSettingsClarity.showClientHover);\n\tclient.on('mouseleave', DFSettingsClarity.hideHover);\n});"],"names":["Application","prototype","_recalculateDimensions","this","element","style","height","setPosition","SettingsProcessor","_updateLabels","text","div","percentage","label","hint","split","DELIM","undefined","isNaN","redPerc","greenPerc","red","Math","round","toString","padStart","green","css","find","html","classList","contains","_getOptions","query","keys","limit","Infinity","threshold","min","length","allowTypo","DefaultSettingsProcessor","_settings","_getMenuData","el","$","_getRegularData","processSettings","children","each","_","section","HTMLHeadingElement","push","injectSearch","performSearch","pattern","item","show","results","fuzzysort","go","c","resultIdx","findIndex","x","obj","highlight","hide","FuzzySearch","static","Hooks","on","_settingsConfig","_data","_settingsProcessor","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","prop","hasOwnProperty","call","r","Symbol","toStringTag","value","DFSettingsClarity","libWrapper","register","settingsRegister","pair","game","settings","name","formatName","settingsRegisterMenu","menus","data","startsWith","scope","types","includes","restricted","console","warn","i18n","localize","wrapper","event","clientX","target","offset","left","hideHover","showHover","hover","parent","document","body","append","position","outerWidth","top","remove","once","user","users","_id","userId","perms","role","patchGameSettings","patchGameSettingsMenus","modules","active","error","isGM","ui","notifications","attr","_app","world","showWorldHover","client","showClientHover"],"sourceRoot":""}